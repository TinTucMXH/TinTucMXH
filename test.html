<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Công cụ Hoai - Cyber Tools</title>

<style>
    body {
        margin: 0;
        font-family: 'Segoe UI', sans-serif;
        background: #021017; /* Xanh đen đậm */
        color: #b7ffea;
        overflow-x: hidden;
    }

    h1 {
        text-align: center;
        padding: 20px;
        color: #00ffa6;
        text-shadow: 0 0 12px #00ffa6;
        letter-spacing: 2px;
        font-size: 30px;
        font-weight: 700;
    }

    /* TAB BUTTON */
    .tab-container {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 15px;
    }

    .tab-btn {
        padding: 10px 22px;
        border: 1px solid #00ffbf;
        background: #031c23;
        color: #00ffbf;
        cursor: pointer;
        border-radius: 6px;
        font-size: 16px;
        transition: 0.25s;
        text-shadow: 0 0 6px #00ffbf;
    }

    .tab-btn.active,
    .tab-btn:hover {
        background: #00ffbf;
        color: #000;
        box-shadow: 0 0 20px #00ffbf;
    }

    /* TAB CONTENT */
    .tab {
        display: none;
        padding: 20px;
        width: 92%;
        margin: auto;
        animation: fade 0.3s ease;
    }
    .tab.active { display: block; }

    @keyframes fade { from {opacity: 0;} to {opacity: 1;} }

    /* CYBER GROUPBOX */
    .groupbox {
        border: 1px solid #00ffbf;
        padding: 18px;
        border-radius: 10px;
        background: rgba(0, 255, 180, 0.07);
        box-shadow: 0 0 20px rgba(0, 255, 180, 0.3);
        margin-bottom: 25px;
    }

    .group-title {
        font-size: 18px;
        margin-bottom: 10px;
        color: #64ffd8;
        text-shadow: 0 0 10px #00ffbf;
    }

    textarea, input, select {
        width: 100%;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #00ffbf;
        margin-top: 8px;
        outline: none;
        background: #021c24;
        color: #b7ffea;
        font-size: 15px;
        box-shadow: 0 0 8px #00ffbf inset;
    }

    button {
        margin-top: 12px;
        padding: 10px 18px;
        font-size: 16px;
        border-radius: 6px;
        cursor: pointer;
        border: none;
        color: #000;
        background: #00ffbf;
        font-weight: 600;
        box-shadow: 0 0 15px #00ffbf;
        transition: 0.25s;
    }

    button:hover {
        background: #6fffe0;
        box-shadow: 0 0 22px #6fffe0;
    }

    .btn-row {
        display: flex;
        gap: 10px;
        margin-top: 10px;
    }
</style>
</head>
<body>

<h1>Công cụ convert link</h1>

<div class="tab-container">
    <button class="tab-btn active" onclick="openTab('convert')">Convert Link</button>
    <button class="tab-btn" onclick="openTab('setting')">Setting</button>
</div>

<!-- TAB 1 -->
<div class="tab active" id="convert">
    <div class="groupbox">
        <div class="group-title">Nhập chuỗi bất kỳ</div>
        <textarea id="inputText" rows="4" placeholder="Dán đoạn text bất kỳ có chứa link"></textarea>
        
        <button onclick="convertLink()">Convert</button>

        <div class="group-title" style="margin-top:20px;">Kết quả</div>
        <input id="outputText" placeholder="Link sau khi tách..." readonly>

        <div class="btn-row">
            <button onclick="pasteText()">Paste</button>
            <button onclick="copyText()">Copy</button>
            <button onclick="goLink()">Go</button>
        </div>
    </div>

    <!-- NEW BOX: HASHTAG -->
    <div class="groupbox">
        <div class="group-title">Chọn chủ đề → Tự sinh Hashtag xu hướng</div>

        <select id="hashtagSelect" onchange="genHashtag()">
            <option value="">-- chọn chủ đề --</option>
            <option value="tintuc">Tin tức</option>
            <option value="mubahiem">Mũ bảo hiểm</option>
            <option value="giaitri">Giải trí</option>
            <option value="xuhuong">Trend MXH</option>
        </select>

        <input id="hashtagOut" placeholder="#hashtag sẽ hiển thị tại đây..." readonly>

        <button onclick="copyHashtag()">Copy Hashtag</button>
    </div>

</div>

<!-- TAB 2 -->
<div class="tab" id="setting">
    <div class="groupbox">
        <div class="group-title">Setting</div>
        <p>Tính năng đang cập nhật...</p>
    </div>
</div>

<script>
function openTab(id) {
    document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
    document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    event.target.classList.add("active");
}

/* ---- NEW FIX: PASTE TEXT ---- */
async function pasteText() {
    try {
        let text = await navigator.clipboard.readText();
        document.getElementById("inputText").value = text;
    } catch (e) {
        alert("Trình duyệt không cho phép dán tự động!");
    }
}

function convertLink() {
    let text = document.getElementById("inputText").value.trim();

    // FIX REGEX KHÔNG LỖI – BẮT MỌI LINK
    let url = text.match(/https?:\/\/[^\s"'<>]+/i);

    if (!url) {
        document.getElementById("outputText").value = "Không tìm thấy link!";
        return;
    }

    let link = url[0];
    document.getElementById("outputText").value = link;

    // NEW: Convert xong tự vào link luôn
    window.open(link, "_blank");
}

function copyText() {
    let out = document.getElementById("outputText").value;
    navigator.clipboard.writeText(out);
    alert("Đã copy!");
}

function goLink() {
    let link = document.getElementById("outputText").value;
    if (link.startsWith("http")) window.open(link, "_blank");
    else alert("Link không hợp lệ!");
}

function genHashtag() {
    let type = document.getElementById("hashtagSelect").value;
    let out = document.getElementById("hashtagOut");

    let hashtags = {
        tintuc: "#tintuc #tintucmxh #tintuc24h #newsVN #hotnews #trend2025",
        mubahiem: "#mubahiem #mubahiemchat #antoangiaothong #baohiem #trend",
        giaitri: "#giaitri #showbiz #hottrend #mxh #viral",
        xuhuong: "#trend #trendmxh #hot2025 #viralclip #foru"
    };

    out.value = hashtags[type] || "";
}

function copyHashtag() {
    let out = document.getElementById("hashtagOut");
    navigator.clipboard.writeText(out.value);
    alert("Đã copy hashtag!");
}
</script>

</body>
</html>