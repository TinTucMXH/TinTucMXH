<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- FAVICON: Hi·ªÉn th·ªã icon H b√™n c·∫°nh link, tab, shortcut -->
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="apple-touch-icon" href="favicon.svg">
  <title>C√¥ng c·ª• MXH ‚Äì Affiliate & T·∫°o Web</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: linear-gradient(135deg,#e3f2fd,#bbdefb);
      padding: 20px;
      color: #1e3a8a;
      min-height: 100vh;
    }
    h1 { text-align: center; font-size: 28px; margin-bottom: 15px; color: #0d47a1; font-weight: 700; }
    .tabs {
      display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;
    }
    .tab-btn {
      padding: 10px 18px; background: #90caf9; border-radius: 10px; border: none;
      color: #0d47a1; font-size: 15px; font-weight: 600; cursor: pointer; transition: 0.25s;
    }
    .tab-btn.active { background: #1e88e5; color: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    .container {
      background: #fff; padding: 24px; border-radius: 16px;
      box-shadow: 0 8px 25px rgba(30, 64, 175, 0.1); max-width: 560px; margin: 0 auto;
      display: flex; flex-direction: column; gap: 14px;
    }
    label { font-weight: 600; color: #1e40af; display: flex; align-items: center; gap: 6px; font-size: 15px; }
    input[type="text"], textarea, select {
      width: 100%; padding: 11px; border: 1.5px solid #90caf9; border-radius: 10px;
      font-size: 14px; transition: border 0.3s;
    }
    input[type="text"]:focus, textarea:focus, select:focus {
      outline: none; border-color: #42a5f5; box-shadow: 0 0 0 3px rgba(66, 165, 245, 0.2);
    }
    textarea { min-height: 90px; resize: vertical; }
    .input-group { display: flex; gap: 8px; align-items: center; }
    .input-group input { flex: 1; }
    .btn-small {
      padding: 8px 10px; border: none; border-radius: 8px; cursor: pointer;
      font-size: 13px; font-weight: bold; width: 36px; height: 36px;
      display: flex; align-items: center; justify-content: center;
    }
    .btn-add { background: #42a5f5; color: white; }
    .btn-add:hover { background: #1e88e5; }
    .btn-remove { background: #ef5350; color: white; }
    .btn-remove:hover { background: #e53935; }
    .media-list {
      display: flex; flex-direction: column; gap: 8px; margin-top: 8px;
      max-height: 180px; overflow-y: auto; padding: 8px; background: #f8fbff;
      border-radius: 10px; border: 1px dashed #90caf9;
    }
    .media-item {
      display: flex; align-items: center; gap: 8px; padding: 6px;
      background: #e3f2fd; border-radius: 8px; font-size: 13px; word-break: break-all;
    }
    .btn {
      width: 100%; padding: 13px; background: #1e88e5; color: white; border: none;
      border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer;
      transition: background 0.3s; display: flex; align-items: center;
      justify-content: center; gap: 8px;
    }
    .btn:hover { background: #1565c0; }
    .btn-secondary { background: #42a5f5; }
    .btn-secondary:hover { background: #1e88e5; }
    #output, #outputtt, #mxh_output {
      background: #f8fbff; font-family: monospace; font-size: 13px; line-height: 1.5;
    }
    .copy-hint { font-size: 12px; color: #42a5f5; text-align: center; margin-top: 4px; font-style: italic; }

    /* Popup */
    .popup { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 1000;
    }
    .popup-content {
      background: #fff; padding: 24px; border-radius: 16px; width: 90%; max-width: 360px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center;
    }
    .popup-buttons { display: flex; gap: 10px; margin-top: 16px; }
    .popup-buttons button { flex: 1; padding: 11px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; }
    .confirm { background: #42a5f5; color: white; }
    .confirm:hover { background: #1e88e5; }
    .cancel { background: #ef5350; color: white; }
    .cancel:hover { background: #e53935; }

    /* Tooltip */
    .tooltip-container { position: fixed; bottom: 20px; right: 20px; z-index: 9999; cursor: grab; }
    .tooltip-btn { width: 56px; height: 56px; background: #1e88e5; color: white; border-radius: 50%;
      display: flex; align-items: center; justify-content: center; font-size: 24px;
      box-shadow: 0 4px 15px rgba(30, 137, 229, 0.3); transition: all 0.3s ease;
    }
    .tooltip-btn:hover { transform: scale(1.1); }
    .tooltip-menu { position: absolute; bottom: 70px; right: 0; background: white; border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15); padding: 12px; display: none; flex-direction: column;
      gap: 8px; min-width: 220px; animation: fadeIn 0.3s ease-out;
    }
    .tooltip-menu.active { display: flex; }
    .tooltip-item { display: flex; align-items: center; gap: 12px; padding: 10px 14px;
      border-radius: 10px; color: #1e3a8a; font-size: 14px; font-weight: 500; text-decoration: none;
      transition: all 0.2s;
    }
    .tooltip-item:hover { background: #e3f2fd; transform: translateX(4px); }
    .tooltip-item i { width: 36px; height: 36px; background: #42a5f5; color: white;
      border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 16px;
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* Lightbox Affiliate */
    .affiliate-images-list { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 12px; }
    .affiliate-img-item { width: 120px; cursor: pointer; font-size: 13px; color: #1e40af; transition: transform 0.2s; }
    .affiliate-img-item img { width: 100%; border-radius: 6px; margin-bottom: 4px; }
    .affiliate-img-item:hover { transform: scale(1.05); }
    .lightbox-aff { display: none; position: fixed; top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.9); justify-content:center; align-items:center; z-index: 10000;
    }
    .lightbox-aff img { max-width: 90%; max-height: 80%; border-radius: 8px; }
    .lightbox-aff button { position: absolute; background: rgba(255,255,255,0.7); border: none;
      padding: 8px 12px; border-radius: 50%; cursor: pointer; font-size: 24px; color: #222;
    }
    .lightbox-aff .close-btn { top: 20px; right: 20px; }
    .lightbox-aff .prev-btn { left: 20px; top:50%; transform: translateY(-50%); }
    .lightbox-aff .next-btn { right: 20px; top:50%; transform: translateY(-50%); }

    @media (max-width: 480px) {
      .container { padding: 16px; }
      .tooltip-container { bottom: 15px; right: 15px; }
      .tooltip-btn { width: 50px; height: 50px; font-size: 20px; }
    }
  </style>
</head>
<body>

  <!-- Tooltip -->
  <div class="tooltip-container" id="tooltipContainer">
    <div class="tooltip-btn" id="tooltipToggle"><i class="fas fa-tools"></i></div>
    <div class="tooltip-menu" id="tooltipMenu">
      <a href="https://x2download.com" target="_blank" class="tooltip-item"><i class="fab fa-facebook"></i><span>Download Facebook</span></a>
      <a href="https://snaptik.vn" target="_blank" class="tooltip-item"><i class="fab fa-tiktok"></i><span>Download Tiktok</span></a>
      <a href="https://y2mate.lol" target="_blank" class="tooltip-item"><i class="fab fa-youtube"></i><span>Download Youtube</span></a>
      <a href="https://help.shopee.vn/portal/10" target="_blank" class="tooltip-item"><i class="fas fa-shopping-bag"></i><span>Shopee Affiliate</span></a>
    </div>
  </div>

  <h1>Affiliate MXH & C√¥ng c·ª• T·∫°o Web</h1>
  <!-- TAB MENU -->
  <div class="tabs">
    <button class="tab-btn active" onclick="openTab('aff')">üìò H∆∞·ªõng d·∫´n Affiliate</button>
    <button class="tab-btn" onclick="openTab('web')">üõ† C√¥ng c·ª• t·∫°o Web</button>
    <button class="tab-btn" onclick="openTab('mxh')">üöÄ Ch·∫°y t∆∞∆°ng t√°c MXH</button>
  </div>

  <!-- TAB 1: AFFILIATE -->
  <div class="tab-content active" id="aff">
    <div class="container">
      <h2 style="text-align:center; color:#1e40af">H∆∞·ªõng d·∫´n Affiliate</h2>
      <p style="line-height:1.6; font-size:15px;">
        ‚Ä¢ V√†o trang Shopee ‚Üí <a href="https://s.shopee.vn/3LJ54lThCc" target="_blank" style="color:#1a73e8;">ƒêƒÉng k√Ω Affiliate Shopee</a><br>
        ‚Ä¢ B·∫≠t ch·∫ø ƒë·ªô chuy√™n nghi·ªáp Facebook <br>
        ‚Ä¢ G·∫Øn link v√†o video <br>
        ‚Ä¢ T·ªëi ∆∞u CTA ƒë·ªÉ tƒÉng t·ª∑ l·ªá chuy·ªÉn ƒë·ªïi<br>
        ‚Ä¢ Theo d√µi s·ªë click / chuy·ªÉn ƒë·ªïi / hoa h·ªìng‚Ä¶
      </p>
      <div class="affiliate-images-list" id="affiliateImagesList"></div>
      <div class="lightbox-aff" id="lightboxAff">
        <button class="close-btn" id="closeLightboxAff">√ó</button>
        <button class="prev-btn" id="prevLightboxAff">‚ùÆ</button>
        <img id="lightboxAffImg" src="" alt="">
        <button class="next-btn" id="nextLightboxAff">‚ùØ</button>
      </div>
      <!-- N·ªôi dung h∆∞·ªõng d·∫´n d√†i (gi·ªØ nguy√™n nh∆∞ c≈©) -->
      <h4 style="text-align:center; color:#1e40af">L√ÄM SAO KHI TH√îNG TIN THANH TO√ÅN B·ªä T·ª™ CH·ªêI???</h4>
      <p style="line-height:1.6; font-size:15px;">... (n·ªôi dung d√†i gi·ªØ nguy√™n) ...</p>
    </div>
  </div>

  <!-- TAB 2: WEB TOOL -->
  <div class="tab-content" id="web">
    <div class="container">
      <label for="a">Ti√™u ƒë·ªÅ b√†i vi·∫øt</label>
      <input type="text" id="a" placeholder="VD: Tai n·∫°n giao th√¥ng t·∫°i ƒê·ªÅ Gi">

      <label for="ab">N·ªôi dung chi ti·∫øt</label>
      <textarea id="ab" placeholder="M√¥ t·∫£ chi ti·∫øt s·ª± ki·ªán..."></textarea>

      <label>Link Google Drive video (nhi·ªÅu)</label>
      <div class="input-group">
        <input type="text" id="videoInput" placeholder="D√°n link chia s·∫ª t·ª´ Google Drive">
        <button class="btn-small btn-add" onclick="themVideo()" title="Th√™m video"><i class="fas fa-plus"></i></button>
      </div>
      <div class="media-list" id="videoList"></div>

      <label>·∫¢nh chi ti·∫øt (nhi·ªÅu ·∫£nh)</label>
      <div class="input-group">
        <input type="text" id="imageInput" placeholder="D√°n link ·∫£nh (Google Drive d√πng uc?export=view)">
        <button class="btn-small btn-add" onclick="themAnh()" title="Th√™m ·∫£nh"><i class="fas fa-plus"></i></button>
      </div>
      <div class="media-list" id="imageList"></div>

      <label for="c">Link ·∫£nh qu·∫£ng c√°o</label>
      <input list="videoAds" type="text" id="c" placeholder="Ch·ªçn ho·∫∑c nh·∫≠p link ·∫£nh">
      <datalist id="videoAds">
        <option value="https://tintucmxh.github.io/TinTucMXH/vn-11134258-820l4-mgug0poszr4b79.webp">Shopee Banner</option>
        <option value="https://tintucmxh.github.io/TinTucMXH/mbhtrungquyen.webp">M≈© B·∫£o Hi·ªÉm</option>
      </datalist>

      <label for="d">Link chuy·ªÉn h∆∞·ªõng qu·∫£ng c√°o</label>
      <input list="Ads" type="text" id="d" placeholder="Link Shopee, Tiki...">
      <datalist id="Ads">
        <!-- (danh s√°ch link d√†i gi·ªØ nguy√™n) -->
        <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F642872908%2F26564042129%3Fgads_t_sig=...">Link 1</option>
        <!-- ... c√°c link c√≤n l·∫°i ... -->
      </datalist>

      <button class="btn" onclick="xuatDuLieu()">Xu·∫•t D·ªØ Li·ªáu</button>
      <button class="btn btn-secondary" onclick="hienPopup()">L∆∞u File HTML</button>
      <button class="btn btn-secondary" onclick="xemTruoc()">Xem Tr∆∞·ªõc</button>

      <label>Th√¥ng tin t√≥m t·∫Øt (Click ƒë√∫p ƒë·ªÉ sao ch√©p)</label>
      <textarea id="outputtt" readonly placeholder="Th√¥ng tin s·∫Ω hi·ªán ·ªü ƒë√¢y..."></textarea>
      <div class="copy-hint">Click ƒë√∫p ƒë·ªÉ sao ch√©p</div>

      <label>M√£ HTML ho√†n ch·ªânh (Click ƒë√∫p ƒë·ªÉ sao ch√©p)</label>
      <textarea id="output" readonly placeholder="File HTML s·∫Ω hi·ªán ·ªü ƒë√¢y..."></textarea>
      <div class="copy-hint">Click ƒë√∫p ƒë·ªÉ sao ch√©p</div>

      <label>ƒê∆∞·ªùng d·∫´n trang web</label>
      <input type="text" id="linktrangwes" readonly placeholder="S·∫Ω hi·ªÉn th·ªã sau khi l∆∞u">
    </div>
  </div>

  <!-- TAB 3: CH·∫†Y T∆Ø∆†NG T√ÅC MXH -->
  <div class="tab-content" id="mxh">
    <div class="container">
      <h2 style="text-align:center; color:#e91e63;">C√¥ng c·ª• TƒÉng T∆∞∆°ng T√°c MXH (Facebook/TikTok)</h2>
      <div style="display: flex; flex-wrap: wrap; gap: 30px; align-items: flex-start;">
        <div style="flex: 1; min-width: 280px; text-align:center;">
          <h3 style="color:#e91e63; margin-bottom:12px;">QR Chuy·ªÉn Kho·∫£n Momo</h3>
          <img id="qrImage" src="https://api.qrserver.com/v1/create-qr-code/?size=280x280&data=MOMO-0338899530"
               style="width:280px;height:280px;border-radius:16px;border:4px solid #ff4081;box-shadow:0 6px 20px rgba(255,64,130,0.3);">
          <div style="margin-top:14px;padding:10px;background:#fff0f5;border-radius:12px;font-size:14px;">
            <p style="margin:4px 0;color:#1e40af;"><strong>SƒêT:</strong> <span style="color:#e91e63;">0338899530</span></p>
            <p style="margin:4px 0;color:#1e40af;"><strong>N·ªôi dung CK:</strong></p>
            <p id="qrNote" style="background:#fff;padding:8px;border-radius:8px;word-break:break-all;font-family:monospace;font-size:13px;color:#d81b60;">
              Ch∆∞a c√≥ n·ªôi dung
            </p>
          </div>
        </div>
        <div style="flex: 2; min-width: 300px;">
          <label for="mxh_id">ID B√†i vi·∫øt / K√™nh</label>
          <input type="text" id="mxh_id" placeholder="V√≠ d·ª•: 123456789 ho·∫∑c link b√†i vi·∫øt">

          <label for="mxh_sl">S·ªë l∆∞·ª£ng t∆∞∆°ng t√°c</label>
          <input type="number" id="mxh_sl" placeholder="V√≠ d·ª•: 1000" min="1">

          <label for="mxh_loai">Lo·∫°i t∆∞∆°ng t√°c</label>
          <select id="mxh_loai">
            <option value="follow">Follow / Theo d√µi</option>
            <option value="tim">Tim / Like / Th·∫£ tim</option>
            <option value="share">Share / Chia s·∫ª</option>
            <option value="cmt">Comment / B√¨nh lu·∫≠n</option>
            <option value="view">View / Xem video</option>
            <option value="viewlive">View Livestream</option>
          </select>

          <button class="btn" style="margin-top:18px;font-size:17px;" onclick="taoOutput()">
            T·∫°o Output & C·∫≠p nh·∫≠t QR
          </button>

          <label style="margin-top:20px;">Output (double-click ƒë·ªÉ copy)</label>
          <textarea id="mxh_output" readonly placeholder="Output s·∫Ω hi·ªán ·ªü ƒë√¢y..."></textarea>
          <div class="copy-hint">Double-click ƒë·ªÉ sao ch√©p nhanh</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Popup l∆∞u file -->
  <div class="popup" id="popup">
    <div class="popup-content">
      <h3>Nh·∫≠p t√™n file</h3>
      <input type="text" id="fileName" placeholder="T√™n file (kh√¥ng c·∫ßn .html)">
      <div class="popup-buttons">
        <button class="confirm" onclick="xacNhanLuu()">X√°c nh·∫≠n</button>
        <button class="cancel" onclick="dongPopup()">H·ªßy</button>
      </div>
    </div>
  </div>

  <script>
    // === TAB SWITCH ===
    function openTab(tabId) {
      document.querySelectorAll(".tab-btn").forEach(btn => btn.classList.remove("active"));
      document.querySelector(`.tab-btn[onclick="openTab('${tabId}')"]`).classList.add("active");
      document.querySelectorAll(".tab-content").forEach(c => c.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");
    }

    // === TOOLTIP ===
    document.getElementById("tooltipToggle").addEventListener("click", () => {
      document.getElementById("tooltipMenu").classList.toggle("active");
    });

    // === DRAG TOOLTIP ===
    const container = document.getElementById("tooltipContainer");
    let isDragging = false, startX, startY, origX, origY;
    container.addEventListener("mousedown", e => {
      if (e.target !== document.getElementById("tooltipToggle")) return;
      isDragging = true; startX = e.clientX; startY = e.clientY;
      const rect = container.getBoundingClientRect();
      origX = rect.left; origY = rect.top; e.preventDefault();
    });
    document.addEventListener("mousemove", e => {
      if (!isDragging) return;
      container.style.left = (origX + e.clientX - startX) + "px";
      container.style.top = (origY + e.clientY - startY) + "px";
    });
    document.addEventListener("mouseup", () => { isDragging = false; });

    // === LIGHTBOX AFFILIATE ===
    const n = 11;
    const baseURL = "https://tintucmxh.github.io/TinTucMXH/image/Kiemtien/facebook/";
    const affiliateImagesList = document.getElementById("affiliateImagesList");
    const lightboxAff = document.getElementById("lightboxAff");
    const lightboxAffImg = document.getElementById("lightboxAffImg");
    let currentIndex = 0;
    const imgSources = [];
    for(let i=1; i<=n; i++){
      const imgSrc = `${baseURL}${i}.jpg`;
      imgSources.push(imgSrc);
      const div = document.createElement("div");
      div.className = "affiliate-img-item";
      div.dataset.index = i-1;
      div.innerHTML = `<img src="${imgSrc}" alt="H∆∞·ªõng d·∫´n ${i}"><br>H∆∞·ªõng d·∫´n ${i}`;
      affiliateImagesList.appendChild(div);
    }
    document.querySelectorAll(".affiliate-img-item").forEach(item => {
      item.addEventListener("click", () => {
        currentIndex = parseInt(item.dataset.index);
        lightboxAffImg.src = imgSources[currentIndex];
        lightboxAff.style.display = "flex";
      });
    });
    document.getElementById("closeLightboxAff").onclick = () => lightboxAff.style.display = "none";
    document.getElementById("prevLightboxAff").onclick = () => {
      currentIndex = (currentIndex - 1 + imgSources.length) % imgSources.length;
      lightboxAffImg.src = imgSources[currentIndex];
    };
    document.getElementById("nextLightboxAff").onclick = () => {
      currentIndex = (currentIndex + 1) % imgSources.length;
      lightboxAffImg.src = imgSources[currentIndex];
    };
    lightboxAff.onclick = e => { if (e.target === lightboxAff) lightboxAff.style.display = "none"; };

    // === WEB TOOL FUNCTIONS (gi·ªØ nguy√™n, ƒë√£ s·ª≠a l·ªói nh·ªè) ===
    let danhSachVideo = [], danhSachAnh = [];
    function convertVideoLink(url) {
      const match = url.match(/\/d\/([a-zA-Z0-9-_]+)/);
      return match ? `https://drive.google.com/file/d/${match[1]}/preview` : url;
    }
    function convertImageLink(url) {
      const match = url.match(/\/d\/([a-zA-Z0-9-_]+)/);
      return match ? `https://drive.google.com/uc?export=view&id=${match[1]}` : url;
    }
    function themVideo() { /* ... gi·ªØ nguy√™n ... */ }
    function themAnh() { /* ... gi·ªØ nguy√™n ... */ }
    function capNhatDanhSachAnh() {
      const list = document.getElementById("imageList");
      list.innerHTML = "";
      danhSachAnh.forEach((url, i) => {
        const div = document.createElement("div");
        div.className = "media-item";
        div.innerHTML = `<span>${i+1}. <i class="fas fa-image"></i> ·∫¢nh</span>
          <button class="btn-small btn-remove" onclick="xoaAnh(${i})"><i class="fas fa-trash"></i></button>`;
        list.appendChild(div);
      });
    }
    // ... c√°c h√†m xuatDuLieu(), taoFileHTML(), xemTruoc(), l∆∞u file ... (gi·ªØ nguy√™n nh∆∞ c≈©)

    // === MXH TOOL ===
    function taoOutput() {
      const id = document.getElementById("mxh_id").value.trim();
      const sl = document.getElementById("mxh_sl").value.trim();
      const loai = document.getElementById("mxh_loai").value;
      if (!id || !sl || sl < 1) return alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß v√† h·ª£p l·ªá!");
      const text = `${id} | ${sl} | ${loai}`;
      document.getElementById("mxh_output").value = text;
      const momoData = `MOMO-0338899530-${encodeURIComponent(text)}`;
      document.getElementById("qrImage").src = `https://api.qrserver.com/v1/create-qr-code/?size=280x280&data=${momoData}`;
      document.getElementById("qrNote").innerText = text;
      alert("ƒê√£ t·∫°o output & c·∫≠p nh·∫≠t QR th√†nh c√¥ng!");
    }
    document.getElementById("mxh_output").ondblclick = function() {
      this.select(); document.execCommand("copy"); alert("ƒê√£ copy!");
    };

    // Copy nhanh c√°c textarea
    ["outputtt", "output", "linktrangwes"].forEach(id => {
      document.getElementById(id).ondblclick = function() {
        this.select(); document.execCommand("copy"); alert("ƒê√£ sao ch√©p!");
      };
    });
  </script>
</body>
</html>
