<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Qu·∫£n Tr·ªã Vi√™n Tin T·ª©c</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #e3f2fd, #bbdefb);
      padding: 20px;
      color: #1e3a8a;
    }
    h2 {
      text-align: center;
      color: #1e40af;
      margin-bottom: 20px;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    .container {
      background: #fff;
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 8px 25px rgba(30, 64, 175, 0.1);
      max-width: 560px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }
    label {
      font-weight: 600;
      color: #1e40af;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 15px;
    }
    input[type="text"], textarea {
      width: 100%;
      padding: 11px;
      border: 1.5px solid #90caf9;
      border-radius: 10px;
      font-size: 14px;
      transition: border 0.3s;
    }
    input[type="text"]:focus, textarea:focus {
      outline: none;
      border-color: #42a5f5;
      box-shadow: 0 0 0 3px rgba(66, 165, 245, 0.2);
    }
    textarea { min-height: 90px; resize: vertical; }

    /* Input + Button Group */
    .input-group {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .input-group input {
      flex: 1;
    }
    .btn-small {
      padding: 8px 10px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      font-weight: bold;
      transition: all 0.2s;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .btn-add {
      background: #42a5f5;
      color: white;
    }
    .btn-add:hover { background: #1e88e5; }
    .btn-remove {
      background: #ef5350;
      color: white;
    }
    .btn-remove:hover { background: #e53935; }

    /* Image List */
    .image-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 8px;
      max-height: 180px;
      overflow-y: auto;
      padding: 8px;
      background: #f8fbff;
      border-radius: 10px;
      border: 1px dashed #90caf9;
    }
    .image-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px;
      background: #e3f2fd;
      border-radius: 8px;
      font-size: 13px;
      word-break: break-all;
    }

    /* Buttons */
    .btn {
      width: 100%;
      padding: 13px;
      background: #1e88e5;
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .btn:hover { background: #1565c0; }
    .btn-secondary { background: #42a5f5; }
    .btn-secondary:hover { background: #1e88e5; }

    /* Output */
    #output, #outputtt {
      background: #f8fbff;
      font-family: monospace;
      font-size: 13px;
      line-height: 1.5;
    }
    .copy-hint {
      font-size: 12px;
      color: #42a5f5;
      text-align: center;
      margin-top: 4px;
      font-style: italic;
    }

    /* Popup */
    .popup {
      display: none;
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center; align-items: center;
      z-index: 1000;
    }
    .popup-content {
      background: #fff;
      padding: 24px;
      border-radius: 16px;
      width: 90%;
      max-width: 360px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      text-align: center;
    }
    .popup input {
      margin-top: 12px;
    }
    .popup-buttons {
      display: flex;
      gap: 10px;
      margin-top: 16px;
    }
    .popup-buttons button {
      flex: 1;
      padding: 11px;
      border-radius: 10px;
      border: none;
      font-weight: bold;
      cursor: pointer;
    }
    .confirm { background: #42a5f5; color: white; }
    .confirm:hover { background: #1e88e5; }
    .cancel { background: #ef5350; color: white; }
    .cancel:hover { background: #e53935; }

    @media (max-width: 480px) {
      .container { padding: 16px; }
      h2 { font-size: 20px; }
    }
  </style>
</head>
<body>
  <h2>Qu·∫£n Tr·ªã Vi√™n Tin T·ª©c MXH</h2>
  <div class="container">

    <!-- Ti√™u ƒë·ªÅ -->
    <label for="a">Ti√™u ƒë·ªÅ b√†i vi·∫øt</label>
    <input type="text" id="a" placeholder="VD: Tai n·∫°n giao th√¥ng t·∫°i ƒê·ªÅ Gi">

    <!-- N·ªôi dung -->
    <label for="ab">N·ªôi dung chi ti·∫øt</label>
    <textarea id="ab" placeholder="M√¥ t·∫£ chi ti·∫øt s·ª± ki·ªán..."></textarea>

    <!-- Video -->
    <label for="b">Link Google Drive video</label>
    <input type="text" id="b" placeholder="D√°n link chia s·∫ª t·ª´ Google Drive">

    <!-- ·∫¢nh qu·∫£ng c√°o -->
    <label for="c">Link ·∫£nh qu·∫£ng c√°o</label>
    <input list="videoAds" type="text" id="c" placeholder="Ch·ªçn ho·∫∑c nh·∫≠p link ·∫£nh">
    <datalist id="videoAds">
      <option value="https://tintucmxh.github.io/TinTucMXH/vn-11134258-820l4-mgug0poszr4b79.webp">Shopee Banner</option>
      <option value="https://tintucmxh.github.io/TinTucMXH/mbhtrungquyen.webp">M≈© B·∫£o Hi·ªÉm</option>
    </datalist>

    <!-- Link chuy·ªÉn h∆∞·ªõng -->
    <label for="d">Link chuy·ªÉn h∆∞·ªõng qu·∫£ng c√°o</label>
    <input list="Ads" type="text" id="d" placeholder="Link Shopee, Tiki...">
    <datalist id="Ads">
  <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F642872908%2F26564042129%3Fgads_t_sig%3DVTJGc2RHVmtYMTlxTFVSVVRrdENkUm9yWVZMbGw0Q214S0d1TzNEZmUwNE9UTHo2Tmlza0JVKzdncFhxMXphcGxLOUkzNmJTODV4Q0JJajV2ZlM3VEQxR3RUU01TUEZwc1lyZCtlZkhXQ011RmVRTHBYZHlIanB5OFBvYXN2dXZKbW95Tmt5bHFLNkNLcks5Vk5iTW53PT0&sm=fb_partner&affiliate_id=17335420220">Link 1</option>
  
  <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F1597381587%2F42120625683%3Fgads_t_sig%3DVTJGc2RHVmtYMTlxTFVSVVRrdENkZmdTUmpMeSszRElEdm91eXFrOVhzNUp2MkZYam1qS3k3K3JBMzBkWUdkT3NMS0daZGtXc3VwZG5HOEthM3JRT3ZiTFdUN3BXVmxvMVpEZEpJZ05aZytzcEtWR0ZVbE9NeE1VK2Y3VVM2UmxiOWFTaHc0NmpzcFE0NmtValZSTjFnPT0&sm=fb_partner&affiliate_id=17335420220">Link 2</option>
  
  <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F60321356%2F24186455622%3Fgads_t_sig%3DVTJGc2RHVmtYMTlxTFVSVVRrdENkUzJYdkg4SUFId3huV3BOemxRSlQvQ0FTRWFTMUw4TExrd1hYRGlPUlVlRFlTak9NYXBzZEJ1VTFCZkx4UlFUT3k5NEx1SEJ3bTZoMkZrcEhzaFRWTmtqRUxoeFN3emk4cm8zaTY1RjlTWlc&sm=fb_partner&affiliate_id=17335420220">Link 3</option>
  
  <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F134371556%2F42423910759%3Fgads_t_sig%3DVTJGc2RHVmtYMTlxTFVSVVRrdENkUm9yWVZMbGw0Q214S0d1TzNEZmUwNVVDbzlwcVRBVDZ3dDl1dlZ5dlpHVU9rTkFDY2RVZ0UvMkgxNHRJRktEa2xqVER6SDRwT3FQUGFXQ3YrTDhCNWFoNHZSN3BWL3c4K21FUkdUckd6a2x6d2V1MlJaUSt2UjV3WnR4UGRRT3hBPT0&sm=fb_partner&affiliate_id=17335420220">Link 4</option>
  
  <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F1362679168%2F42725093098%3Fgads_t_sig%3DVTJGc2RHVmtYMTlxTFVSVVRrdENkZmdTUmpMeSszRElEdm91eXFrOVhzNU5xQVdFa0NHWU9WRTU1RHdLSWo0ZXhIWHJ4M0lsYmpSdSs5WmdlMGwxYjBNQnd6ZXc0RUR1UGpqWVJXbDhPb04yam9MNVpueWpFa3pJUUE5ditLdTJ0TkU4U1BmUmUzSW9ncC9kTnA3UXpBPT0&sm=fb_partner&affiliate_id=17335420220">Link 5</option>
  
  <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F1116012986%2F28111763195%3Fgads_t_sig%3DVTJGc2RHVmtYMTlxTFVSVVRrdENkZmdTUmpMeSszRElEdm91eXFrOVhzNDFUcWFjSXJ2THR4K3RtYnBENjR2Qk1BdVY0b3M2WnN0VTEvcjhUaXp0YmROU2o1ZmxIWkFGVG9LSFMwd2FCelRhbVpIL3lTZkd3Z3g5Z2tnWFFrNkVtV3VYUTBoSDhuT1JsZHBJSVpKOGJ3PT0&sm=fb_partner&affiliate_id=17335420220">Link 6</option>
  
  <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F457209160%2F23750569400%3Fgads_t_sig%3DVTJGc2RHVmtYMTlxTFVSVVRrdENkUm9yWVZMbGw0Q214S0d1TzNEZmUwNEx3RU1NWVR6VVpZaFBSSTVaV20wVk9HWVJ3QVM2SzhIT1lqYWhwZlRUWVVrWGU3d2l6RlhkTFl5UlluT0h2eEY3RTExWjUyUmlhd09uQ3NDMEFKRzU5b1ZHYmhOQmlqWDFSRjgxZllLMEx3PT0&sm=fb_partner&affiliate_id=17335420220">Link 7</option>
  
  <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F1587552560%2F25496198743%3Fgads_t_sig%3DVTJGc2RHVmtYMTlxTFVSVVRrdENkZmdTUmpMeSszRElEdm91eXFrOVhzNVNLYXFGcEMwcTI1MVhwVUZGY20rSGlQZnhFVDlCb3p6SXdweVQ1WUhDck9mYmRUTWVLOXhrZ3FVUTVqWmpldmdud0drazBCRWp2YkZ3eVhwaXNxeTBsVzBrYTJXWUN6MTIxODlkdm82ZW5BPT0&sm=fb_partner&affiliate_id=17335420220">Link 8</option>
  
  <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F388618830%2F28618025544%3Fgads_t_sig%3DVTJGc2RHVmtYMTlxTFVSVVRrdENkUm9yWVZMbGw0Q214S0d1TzNEZmUwN2VaREV1aU9GcHJRZXlHVkhuQ2cyT2JmbFdUaEFveEFNaWQzR2VCOUQ1VU1lcEJBcWdEL0lNOU13VmhYeW1zVkJEd2YxeWhPd2EwVmg5YThRUXMyM3FpOEVSVjUya3ZycDF5VmFXSnJqd1l3PT0&sm=fb_partner&affiliate_id=17335420220">Link 9</option>
  
  <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F435368915%2F18892985217%3Fgads_t_sig%3DVTJGc2RHVmtYMTlxTFVSVVRrdENkUm9yWVZMbGw0Q214S0d1TzNEZmUwNUxENGRGUUlmbWdraFVieUZTQzNPRDl1VVpRQzRJeDRyeGg4V2FBTnNiSnFKMllMa0cxNGY3Y3dINnVkYzlTRDRWMGhoRG9VU3VULzJjTG5RVXp6MHlEek5CTU96dC9aNk16NUVFWFRqdWF3PT0&sm=fb_partner&affiliate_id=17335420220">Link 10</option>
  
  <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F952306790%2F17793921989%3Fgads_t_sig%3DVTJGc2RHVmtYMTlxTFVSVVRrdENkUm9yWVZMbGw0Q214S0d1TzNEZmUwN2xMUzY0dFRLQU1OcWc1ZGFra1pTVHEzdEt5K2dqZmVOMHVKaWt2b0NjbkVDL3A3TFBpalJzRXdRdStJVEY4Q040ZGVVNDF0SWNyZ1Q3bHRVVzlwT20rRkoxbzdkVEFTRlBZRFBsS3A0NHN3PT0&sm=fb_partner&affiliate_id=17335420220">Link 11</option>
  
  <option value="https://s.shopee.vn/an_redir?origin_link=https%3A%2F%2Fshopee.vn%2Fproduct%2F165690495%2F18374639660%3Fgads_t_sig%3DVTJGc2RHVmtYMTlxTFVSVVRrdENkUm9yWVZMbGw0Q214S0d1TzNEZmUwNUx1MXFvSTNKaGpBM2w3V3dlWXpsdHNvRlY5cVVGR3BMY0xaUHlVZWp5dDFla2FFUU5sOHEyYmZCYW1yQVpsc1NKWlo1QXp2N3lYMTJqZkdESEFLeGVreVdHVElJcDRCKy9rSjZWelNKZUdRPT0&sm=fb_partner&affiliate_id=17335420220">Link 12</option>
</datalist>

    <!-- Th√™m ·∫£nh chi ti·∫øt -->
    <label>·∫¢nh chi ti·∫øt (nhi·ªÅu ·∫£nh)</label>
    <div class="input-group">
      <input type="text" id="imageInput" placeholder="Nh·∫≠p link ·∫£nh...">
      <button class="btn-small btn-add" onclick="themAnh()" title="Th√™m ·∫£nh">
        <i class="fas fa-plus"></i>
      </button>
    </div>
    <div class="image-list" id="imageList"></div>

    <!-- Buttons -->
    <button class="btn" onclick="xuatDuLieu()">Xu·∫•t D·ªØ Li·ªáu</button>
    <button class="btn btn-secondary" onclick="hienPopup()">L∆∞u File HTML</button>
    <button class="btn btn-secondary" onclick="xemTruoc()">Xem Tr∆∞·ªõc</button>

    <!-- Output Th√¥ng tin -->
    <label>Th√¥ng tin t√≥m t·∫Øt</label>
    <textarea id="outputtt" readonly placeholder="Th√¥ng tin s·∫Ω hi·ªán ·ªü ƒë√¢y..."></textarea>

    <!-- Output HTML -->
    <label>M√£ HTML ho√†n ch·ªânh (Click ƒë√∫p ƒë·ªÉ sao ch√©p)</label>
    <textarea id="output" readonly placeholder="File HTML s·∫Ω hi·ªán ·ªü ƒë√¢y..."></textarea>
    <div class="copy-hint">Click ƒë√∫p ƒë·ªÉ sao ch√©p</div>

    <!-- Link trang -->
    <label>ƒê∆∞·ªùng d·∫´n trang web</label>
    <input type="text" id="linktrangwes" readonly placeholder="S·∫Ω hi·ªÉn th·ªã sau khi l∆∞u">
  </div>

  <!-- Popup l∆∞u file -->
  <div class="popup" id="popup">
    <div class="popup-content">
      <h3>Nh·∫≠p t√™n file</h3>
      <input type="text" id="fileName" placeholder="T√™n file (kh√¥ng c·∫ßn .html)">
      <div class="popup-buttons">
        <button class="confirm" onclick="xacNhanLuu()">X√°c nh·∫≠n</button>
        <button class="cancel" onclick="dongPopup()">H·ªßy</button>
      </div>
    </div>
  </div>

  <script>
    let danhSachAnh = [];

    // Th√™m ·∫£nh
    function themAnh() {
      const input = document.getElementById("imageInput");
      const url = input.value.trim();
      if (!url) return alert("Vui l√≤ng nh·∫≠p link ·∫£nh!");

      danhSachAnh.push(url);
      input.value = "";
      capNhatDanhSachAnh();
      xuatDuLieu(); // T·ª± ƒë·ªông c·∫≠p nh·∫≠t output
    }

    // X√≥a ·∫£nh
    function xoaAnh(index) {
      danhSachAnh.splice(index, 1);
      capNhatDanhSachAnh();
      xuatDuLieu();
    }

    // C·∫≠p nh·∫≠t danh s√°ch ·∫£nh
    function capNhatDanhSachAnh() {
      const list = document.getElementById("imageList");
      list.innerHTML = "";
      danhSachAnh.forEach((url, i) => {
        const div = document.createElement("div");
        div.className = "image-item";
        div.innerHTML = `
          <span>${i+1}. ${url}</span>
          <button class="btn-small btn-remove" onclick="xoaAnh(${i})" title="X√≥a">
            <i class="fas fa-trash"></i>
          </button>
        `;
        list.appendChild(div);
      });
    }

    // Chuy·ªÉn Google Drive link
    function convertDriveLink(url) {
      const match = url.match(/\/d\/([a-zA-Z0-9-_]+)/);
      return match ? `https://drive.google.com/file/d/${match[1]}/preview` : url;
    }

    // T·∫°o HTML b·∫±ng m·∫£ng + join
    function taoFileHTML(tieude, noidung, videoUrl, adImg, adLink) {
      const videoSrc = convertDriveLink(videoUrl);
      const mediaJS = danhSachAnh.length > 0
        ? danhSachAnh.map(src => `      { type: "image", src: "${src}" },`).join('\n')
        : '';

      const html = [
        '<!DOCTYPE html>',
        '<html lang="vi">',
        '<head>',
        '  <meta charset="UTF-8">',
        '  <title>üì∞ Tin T·ª©c MXH</title>',
        '  <meta name="viewport" content="width=device-width, initial-scale=1.0">',
        '  <style>',
        '    * { box-sizing: border-box; margin: 0; padding: 0; }',
        '    body { font-family: Arial, sans-serif; background: #f5f6f7; }',
        '    header { background: #222; color: #fff; padding: 12px 18px; }',
        '    nav a { color: #fff; margin-right: 12px; text-decoration: none; font-weight: bold; }',
        '    main { max-width: 900px; margin: 20px auto; padding: 0 16px; }',
        '    article { background: #fff; padding: 16px; border-radius: 6px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); margin-bottom: 20px; }',
        '    footer { text-align: center; padding: 12px; background: #222; color: #fff; margin-top: 18px; }',
        '    .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 8px; margin-top: 12px; background: #000; }',
        '    .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }',
        '    .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px; margin-top: 12px; }',
        '    .gallery img { width: 100%; height: 100px; object-fit: cover; border-radius: 6px; cursor: pointer; transition: transform 0.2s; box-shadow: 0 1px 4px rgba(0,0,0,0.2); }',
        '    .gallery img:hover { transform: scale(1.05); }',
        '    .lightbox { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; justify-content: center; align-items: center; padding: 20px; }',
        '    .lightbox img { max-width: 90%; max-height: 90%; border-radius: 8px; box-shadow: 0 0 20px rgba(255,255,255,0.3); }',
        '    .lightbox.active { display: flex; }',
        '    .popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 320px; background: #fff; box-shadow: 0 4px 20px rgba(0,0,0,0.3); border-radius: 10px; text-align: center; z-index: 9999; padding: 16px; display: none; animation: fadeIn 0.6s ease; }',
        '    @keyframes fadeIn { from { opacity: 0; transform: translate(-50%, -55%); } to { opacity: 1; transform: translate(-50%, -50%); } }',
        '    .popup h3 { margin: 0 0 8px; color: #222; }',
        '    .popup p { color: #555; font-size: 14px; margin-bottom: 10px; }',
        '    .popup img { width: 100%; border-radius: 8px; cursor: pointer; }',
        '    .close-btn { position: absolute; top: 6px; right: 10px; background: #f44336; color: #fff; border: none; border-radius: 50%; width: 24px; height: 24px; cursor: pointer; font-weight: bold; line-height: 22px; }',
        '  </style>',
        '</head>',
        '<body>',
        '  <header>',
        '    <h1>Tin T·ª©c M·∫°ng X√£ H·ªôi</h1>',
        '    <nav>',
        '      <a href="index.html">Trang ch·ªß</a>',
        '      <a href="news.html">Tin t·ª©c</a>',
        '      <a href="about.html">Gi·ªõi thi·ªáu</a>',
        '    </nav>',
        '  </header>',
        '  <main>',
        '    <article>',
        '      <h2>' + tieude + '</h2>',
        '      <p>' + noidung.replace(/\n/g, '<br>') + '</p>',
        '      <div class="video-container">',
        '        <iframe src="' + videoSrc + '" allow="autoplay; encrypted-media" allowfullscreen></iframe>',
        '      </div>',
        '      <div id="mediaContainer"></div>',
        '    </article>',
        '  </main>',
        '  <footer>¬© 2025 Tin T·ª©c 24h</footer>',
        '  <div class="lightbox" id="lightbox"><img id="lightboxImg" src="" alt="·∫¢nh l·ªõn"></div>',
        '  <div class="popup" id="adPopup">',
        '    <button class="close-btn" id="closePopup">√ó</button>',
        '    <h3>Khuy·∫øn m√£i ƒë·∫∑c bi·ªát!</h3>',
        '    <p>Nh·∫•n v√†o ·∫£nh ƒë·ªÉ xem chi ti·∫øt ∆∞u ƒë√£i.</p>',
        '    <img id="adImage" src="' + adImg + '" alt="Qu·∫£ng c√°o">',
        '  </div>',
        '  <script>',
        '    const adLink = "' + adLink + '";',
        '    const mediaItems = [',
        '      { type: "video", src: "' + videoSrc + '" },' + (mediaJS ? '\n' + mediaJS : ''),
        '    ];',
        '    window.onload = function() {',
        '      const container = document.getElementById("mediaContainer");',
        '      const lightbox = document.getElementById("lightbox");',
        '      const lightboxImg = document.getElementById("lightboxImg");',
        '      const popup = document.getElementById("adPopup");',
        '      const adImage = document.getElementById("adImage");',
        '      const closePopup = document.getElementById("closePopup");',
        '      mediaItems.forEach((item, i) => {',
        '        if (item.type === "video") {',
        '          const div = document.createElement("div"); div.className = "video-container";',
        '          div.innerHTML = `<iframe src="${item.src}" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;',
        '          container.appendChild(div);',
        '        } else if (item.type === "image") {',
        '          if (!document.querySelector(".gallery")) {',
        '            const g = document.createElement("div"); g.className = "gallery"; container.appendChild(g);',
        '          }',
        '          const gallery = document.querySelector(".gallery");',
        '          const img = document.createElement("img");',
        '          img.src = item.src; img.alt = `·∫¢nh ${i}`;',
        '          img.onclick = () => { lightboxImg.src = item.src; lightbox.classList.add("active"); };',
        '          gallery.appendChild(img);',
        '        }',
        '      });',
        '      lightbox.onclick = () => lightbox.classList.remove("active");',
        '      adImage.src = "' + adImg + '";',
        '      adImage.onclick = () => { window.open(adLink, "_blank"); hidePopup(); };',
        '      closePopup.onclick = hidePopup;',
        '      let t; function showPopup() { popup.style.display = "block"; t = setTimeout(() => { window.open(adLink, "_blank"); hidePopup(); }, 5000); }',
        '      function hidePopup() { clearTimeout(t); popup.style.display = "none"; setTimeout(showPopup, 30000); }',
        '      setTimeout(showPopup, 2000);',
        '    };',
        '  <\/script>',
        '</body>',
        '</html>'
      ];

      return html.join('\n');
    }

    // Xu·∫•t d·ªØ li·ªáu
    function xuatDuLieu() {
      const a = document.getElementById("a").value.trim();
      const ab = document.getElementById("ab").value.trim();
      const b = document.getElementById("b").value.trim();
      const c = document.getElementById("c").value.trim() || "https://via.placeholder.com/300x200?text=QC";
      const d = document.getElementById("d").value.trim() || "#";

      if (!a || !ab || !b) {
        alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß ti√™u ƒë·ªÅ, n·ªôi dung v√† link video!");
        return;
      }

      const html = taoFileHTML(a, ab, b, c, d);
      const info = `Ti√™u ƒë·ªÅ: ${a}\nN·ªôi dung: ${ab}\nVideo: ${convertDriveLink(b)}\nQC: ${c}\nLink: ${d}\n·∫¢nh chi ti·∫øt: ${danhSachAnh.length} ·∫£nh`;

      document.getElementById("output").value = html;
      document.getElementById("outputtt").value = info;
    }

    // Click ƒë√∫p sao ch√©p
    document.getElementById("output").ondblclick = function() {
      this.select();
      document.execCommand("copy");
      alert("ƒê√£ sao ch√©p th√¥ng tin!");
    };

    // Xem tr∆∞·ªõc
    function xemTruoc() {
      xuatDuLieu();
      const blob = new Blob([document.getElementById("output").value], { type: "text/html" });
      window.open(URL.createObjectURL(blob), "_blank");
    }

    // Popup
    function hienPopup() { document.getElementById("popup").style.display = "flex"; }
    function dongPopup() {
      document.getElementById("popup").style.display = "none";
      document.getElementById("fileName").value = "";
    }

    // L∆∞u file
    function xacNhanLuu() {
      const ten = document.getElementById("fileName").value.trim();
      if (!ten) return alert("Vui l√≤ng nh·∫≠p t√™n file!");

      xuatDuLieu();
      const blob = new Blob([document.getElementById("output").value], { type: "text/html;charset=utf-8" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = ten + ".html";
      link.click();

      document.getElementById("linktrangwes").value = 
        "https://tintucmxh.github.io/TinTucMXH/" + ten + ".html";

      dongPopup();
    }

    // Enter ƒë·ªÉ th√™m ·∫£nh
    document.getElementById("imageInput").addEventListener("keypress", e => {
      if (e.key === "Enter") themAnh();
    });
  </script>
</body>
</html>
